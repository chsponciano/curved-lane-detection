<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <title>Document</title>
</head>

<body>
    <script type="text/javascript">
        $(document).ready(function() {

            var interval = null;

            var url = 'http://localhost:80';

            $('#init').on('click', function() {
                $.get(url + '/init', function() {
                    interval = setInterval(function() {
                        getAngle();
                    }, 100);
                });
            });

            function setVolante(data) {
                document.getElementById("angle").innerHTML = data;
                document.getElementById("volante").style.transform = "rotate(" + data + "deg)";
            }

            function getAngle() {
                $.get(url + '/angle', function(data) {
                    if (data === 'finish') {
                        clearInterval(interval);
                        document.getElementById("init").disabled = false;
                        setVolante('0');
                    } else {
                        document.getElementById("init").disabled = true;
                        setVolante(data);
                    }
                    console.log(data);
                });
            }

        });
    </script>
    <button id="init">Inicializar</button>

    <div style="text-align: center; font-family: verdana;">
        <h1>Angle: <span id="angle">0</span></h1>
        <img id="volante" src="volante.webp" alt="" width="300">
    </div>

</body>

</html>